generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "debian-openssl-3.0.x"]
  output        = "../generated/prisma_client"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Enum for task status values
enum TaskStatus {
  PENDING
  IN_PROGRESS
  COMPLETED
  CANCELLED
}

model task_assignments {
  id          Int       @id @default(autoincrement())
  task_id     Int
  user_id     Int
  assigned_at DateTime? @default(now()) @db.Timestamptz(6)
  tasks       tasks     @relation(fields: [task_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users       users     @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model tasks {
  id               Int                @id @default(autoincrement())
  title            String
  description      String?
  status           TaskStatus         @default(PENDING)
  due_date         DateTime?          @db.Date
  created_at       DateTime?          @default(now()) @db.Timestamptz(6)
  updated_at       DateTime?          @default(now()) @db.Timestamptz(6)
  task_assignments task_assignments[]
}

model users {
  id               Int                @id @default(autoincrement())
  username         String             @unique
  email            String             @unique
  password_hash    String
  created_at       DateTime?          @default(now()) @db.Timestamptz(6)
  task_assignments task_assignments[]
}
